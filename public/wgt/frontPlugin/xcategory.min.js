$define(["wgt_readyload","tmpl"],function(u,m){u.fn.initCategory=function(s){var i=$compCl.getScope(s.compId);e(s,i),n(s,i),u(".js_clickbtn").on("click",function(){u(this).hasClass("icon-arrow_up")&&(u(this).parent().parent().find(".js_clickbtn").addClass("icon-arrow_up").removeClass("icon-arrow_down"),u(this).parent().parent().find(".p_childBox").addClass("hide"))})};var e=function(s,l){var i=s.data;console.log(i);var d=s.params,e=d.boxClass,n=u("."+e,l),o=d.tmplId,t=(d.targetType,0);var r=function s(i){t++;for(var e=0;e<i.length;e++)i[e].subColumn&&(i[e].children=i[e].subColumn),i[e].childrenList&&(i[e].children=i[e].childrenList),i[e].children&&i[e].children.length||(i[e].parent=!1),!0!==i[e].targetType&&"true"!==i[e].targetType&&"_blank"!=i[e].targetType&&"2"!=i[e].targetType||(i[e].setTarget=!0),i[e].level=t;for(var n=u("#"+o,l).tmpl(i),r=0;r<i.length;r++){var a;i[r].subColumn&&(i[r].children=i[r].subColumn),i[r].childrenList&&(i[r].children=i[r].childrenList),i[r].children&&i[r].children.length&&(a=s(i[r].children),n.eq(r).find("."+d.childBox).html(a))}return n}(i);n.html(r)},n=function(s,i){var e=u.getUrlId(),n=s.params,r=n.isOpen,a=n.isReject,l=n.isSideOut,d=n.boxClass,o=u("."+d,i),t=n.clickBtn,c=u("."+n.clickBtn,o),h=n.parentBox,p=(u("."+n.parentBox,o),n.childBox),C=u("."+n.childBox,o),v=n.linkBox;u("."+n.linkBox,v);r?(C.removeClass("hide"),l||c.removeClass("icon-arrow_up").addClass("icon-arrow_down")):(C.addClass("hide"),l||c.removeClass("icon-arrow_down").addClass("icon-arrow_up")),!l&&e&&(u(i).find("."+h+"[sortid='"+e+"']").parents("."+p).removeClass("hide").prevAll("."+v).children("."+t).removeClass("icon-arrow_up").addClass("icon-arrow_down"),u(i).find("."+h+"[sortid='"+e+"']").children("."+v).addClass("click")),l&&!r?(o.find("."+n.parentBox).each(function(s,i){var e=localStorage.getItem("navChildKey"),n=localStorage.getItem("navParentId");e&&"child"!=e&&e==u(this).attr("sortid")?(u(this).find(".p_childBox:first").prev().addClass("click"),u(this).parents(".p_parentBox").each(function(){u(this).find(".p_childBox:first").prev().addClass("click")})):n==u(this).attr("sortid")&&u(this).find(".p_childBox:first").prev().addClass("click")}),o.find("."+n.parentBox).on("mouseleave",function(){console.log("滑出"),u(this).find("."+p).removeClass("slideOut").addClass("hide")}),o.find(".e_link").on("mouseover",function(){var s=u(this);if(a){s.closest("."+h).siblings("."+h).children("."+p).addClass("hide").removeClass("slideOut");var i=s.parents("."+h)[s.parents("."+h).length-1];u(i).siblings("."+h).children("."+p).addClass("hide").siblings("div").children("."+t).removeClass("slideOut")}0<s.closest("."+h).children("."+p).find("."+h).length&&(s.siblings("div").addClass("slideOut"),s.closest("."+h).children("."+p).removeClass("hide")),m.lazyImg()})):c.on("click",function(){var s=u(this);if(a){s.closest("."+h).siblings("."+h).children("."+p).addClass("hide").siblings("div").children("."+t).removeClass("icon-arrow_down").addClass("icon-arrow_up");var i=s.parents("."+h)[s.parents("."+h).length-1];u(i).siblings("."+h).children("."+p).addClass("hide").siblings("div").children("."+t).removeClass("icon-arrow_down").addClass("icon-arrow_up")}s.hasClass("icon-arrow_down")?(s.removeClass("icon-arrow_down").addClass("icon-arrow_up"),s.closest("."+h).children("."+p).addClass("hide")):(s.removeClass("icon-arrow_up").addClass("icon-arrow_down"),s.closest("."+h).children("."+p).removeClass("hide")),m.lazyImg(),m.setCompPostion()})};return u});