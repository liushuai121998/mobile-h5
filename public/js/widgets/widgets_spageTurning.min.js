$define(["wgt_etree"],function(u){function l(n){for(var t=0;t<n.length;t++)u(n[t]).attr("animation_name")&&u(n[t]).attr("animation_duration")&&u(n[t]).attr("animation_delay")&&u(n[t]).css({animationName:u(n[t]).attr("animation_name"),animationDuration:u(n[t]).attr("animation_duration"),animationDelay:u(n[t]).attr("animation_delay"),animationDirection:"normal"})}function p(n){document.documentElement.clientWidth,document.documentElement.clientHeight;var i=function(n){if("string"==typeof n){return n.split(",").reverse().join(",")}};function e(n){var i=9999;if("string"==typeof n){var e=n.split(","),a="";return e.length<=1?a="0s":(u.each(e,function(n,t){parseFloat(t)<i&&(i=parseFloat(t))}),u.each(e,function(n,t){n>=e.length-1?a+=parseFloat(t)-i+"s":a+=parseFloat(t)-i+"s,"})),a}}!function(n){!function(n){for(var t=0;t<n.length;t++)if(u(n[t]).css("animationName")&&void 0===u(n[t]).attr("animation_name")){var i=new Object;i.name=u(n[t]).css("animationName"),i.delay=u(n[t]).css("animationDelay"),i.duration=u(n[t]).css("animationDuration"),u(n[t]).attr("animation_name",i.name),u(n[t]).attr("animation_duration",i.duration),u(n[t]).attr("animation_delay",i.delay)}}(n);for(var t=0;t<n.length;t++)u(n[t]).css("animationName")&&(u(n[t]).css("animationName","null"),n[t].getBoundingClientRect(),u(n[t]).css("animationDirection","reverse"),u(n[t]).css("animationName",i(u(n[t]).attr("animation_name"))),u(n[t]).css("animationDuration",i(u(n[t]).attr("animation_duration"))),u(n[t]).css("animationDelay",e(u(n[t]).attr("animation_delay"))))}(n)}function g(n,i){return n.map(function(n,t){return 0==t?void 0:n[i]})}function m(n){for(var t=0;t<n.length;t++)if(n[0]!=n[t])return!1;return!0}function w(n){l(n?_.container.find(".screen").eq(_.current-1-1).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div"):_.container.find(".screen").eq(_.current).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div"))}jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(n,t,i,e,a){return jQuery.easing[jQuery.easing.def](n,t,i,e,a)},easeInQuad:function(n,t,i,e,a){return e*(t/=a)*t+i},easeOutQuad:function(n,t,i,e,a){return-e*(t/=a)*(t-2)+i},easeInOutQuad:function(n,t,i,e,a){return(t/=a/2)<1?e/2*t*t+i:-e/2*(--t*(t-2)-1)+i},easeInCubic:function(n,t,i,e,a){return e*(t/=a)*t*t+i},easeOutCubic:function(n,t,i,e,a){return e*((t=t/a-1)*t*t+1)+i},easeInOutCubic:function(n,t,i,e,a){return(t/=a/2)<1?e/2*t*t*t+i:e/2*((t-=2)*t*t+2)+i},easeInQuart:function(n,t,i,e,a){return e*(t/=a)*t*t*t+i},easeOutQuart:function(n,t,i,e,a){return-e*((t=t/a-1)*t*t*t-1)+i},easeInOutQuart:function(n,t,i,e,a){return(t/=a/2)<1?e/2*t*t*t*t+i:-e/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(n,t,i,e,a){return e*(t/=a)*t*t*t*t+i},easeOutQuint:function(n,t,i,e,a){return e*((t=t/a-1)*t*t*t*t+1)+i},easeInOutQuint:function(n,t,i,e,a){return(t/=a/2)<1?e/2*t*t*t*t*t+i:e/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(n,t,i,e,a){return-e*Math.cos(t/a*(Math.PI/2))+e+i},easeOutSine:function(n,t,i,e,a){return e*Math.sin(t/a*(Math.PI/2))+i},easeInOutSine:function(n,t,i,e,a){return-e/2*(Math.cos(Math.PI*t/a)-1)+i},easeInExpo:function(n,t,i,e,a){return 0==t?i:e*Math.pow(2,10*(t/a-1))+i},easeOutExpo:function(n,t,i,e,a){return t==a?i+e:e*(1-Math.pow(2,-10*t/a))+i},easeInOutExpo:function(n,t,i,e,a){return 0==t?i:t==a?i+e:(t/=a/2)<1?e/2*Math.pow(2,10*(t-1))+i:e/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(n,t,i,e,a){return-e*(Math.sqrt(1-(t/=a)*t)-1)+i},easeOutCirc:function(n,t,i,e,a){return e*Math.sqrt(1-(t=t/a-1)*t)+i},easeInOutCirc:function(n,t,i,e,a){return(t/=a/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+i:e/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(n,t,i,e,a){var s=1.70158,o=0,r=e;if(0==t)return i;if(1==(t/=a))return i+e;if(o||(o=.3*a),r<Math.abs(e)){r=e;s=o/4}else s=o/(2*Math.PI)*Math.asin(e/r);return-r*Math.pow(2,10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/o)+i},easeOutElastic:function(n,t,i,e,a){var s=1.70158,o=0,r=e;if(0==t)return i;if(1==(t/=a))return i+e;if(o||(o=.3*a),r<Math.abs(e)){r=e;s=o/4}else s=o/(2*Math.PI)*Math.asin(e/r);return r*Math.pow(2,-10*t)*Math.sin((t*a-s)*(2*Math.PI)/o)+e+i},easeInOutElastic:function(n,t,i,e,a){var s=1.70158,o=0,r=e;if(0==t)return i;if(2==(t/=a/2))return i+e;if(o||(o=a*(.3*1.5)),r<Math.abs(e)){r=e;s=o/4}else s=o/(2*Math.PI)*Math.asin(e/r);return t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/o)*-.5+i:r*Math.pow(2,-10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/o)*.5+e+i},easeInBack:function(n,t,i,e,a,s){return null==s&&(s=1.70158),e*(t/=a)*t*((s+1)*t-s)+i},easeOutBack:function(n,t,i,e,a,s){return null==s&&(s=1.70158),e*((t=t/a-1)*t*((s+1)*t+s)+1)+i},easeInOutBack:function(n,t,i,e,a,s){return null==s&&(s=1.70158),(t/=a/2)<1?e/2*(t*t*((1+(s*=1.525))*t-s))+i:e/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+i},easeInBounce:function(n,t,i,e,a){return e-jQuery.easing.easeOutBounce(n,a-t,0,e,a)+i},easeOutBounce:function(n,t,i,e,a){return(t/=a)<1/2.75?e*(7.5625*t*t)+i:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+i:e*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(n,t,i,e,a){return t<a/2?.5*jQuery.easing.easeInBounce(n,2*t,0,e,a)+i:.5*jQuery.easing.easeOutBounce(n,2*t-a,0,e,a)+.5*e+i}}),Array.prototype.every||(Array.prototype.every=function(n,t){"use strict";var i,e;if(null==this)throw new TypeError("this is null or not defined");var a=Object(this),s=a.length>>>0;if("function"!=typeof n)throw new TypeError;for(1<arguments.length&&(i=t),e=0;e<s;){var o;if(e in a)if(o=a[e],!n.call(i,o,e,a))return!1;e++}return!0});var v,a,_,y,x,b=u(window).width(),q=u(window).height(),M=[],z=0,E=!0,I=!0,P=5;function S(n,t,i){this.current=1,this.size=n||3,this.time=t||500,this.type=i||[,1,1],this.container=u(".w_sfbox.container")}function C(){window.location.hash="#"+M[_.current-1]}function O(){window.location.hash="#"+M[_.current-1]}function D(n,t){for(var i=0,e=n.slice(Math.max(n.length-t,1)),a=0;a<e.length;a++)i+=e[a];return Math.ceil(i/t)}S.container=u(".w_sfbox.container"),S.bigStartTime=0,S.smallStartTime=0,S.prototype.on=function(n,t){this._callbacks||(this._callbacks={});return(this._callbacks[n]||(this._callbacks[n]=[])).push(t),this},S.prototype.trigger=function(){var n,t,i,e=Array.prototype.slice.call(arguments,0),a=e.shift();if(!this._callbacks)return this;if(!(n=this._callbacks[a]))return this;for(t=0,i=n.length;t<i;t++)n[t].apply(this,e);return this},S.prototype._play=function(i,e){var a=!1,s=this;a=i<e;i-=1,e-=1;var n,t=u(".w_sfbox.container").find(">.content").data("items"),o=g(t,"animEff"),r=g(t,"duration").map(function(n,t){return 1e3*n}),c=g(t,"delay").map(function(n,t){return 1e3*n});if(E=!1,(1==(n=this.type.slice(1))[0]?n.slice(1).every(function(n,t){return 1==n}):-1==n[0]&&n.slice(1).every(function(n,t){return-1==n}))&&m(o.slice(1))&&m(r.slice(1))&&m(c.slice(1))){var f="";if(f=a?"-=":"+=",1==this.type[1])this.container.find(".screen").css({float:"none"}),this.container.find(".content").css({width:"100%"}),this.container.animate({"margin-top":-(this.current-1)*q},{easing:o[1],duration:r[1],complete:function(){l(a?_.container.find(".screen").eq(_.current-1-1).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div"):_.container.find(".screen").eq(_.current).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div")),u("body").trigger("DESIGN_TRANK")}}).delay(c[1]),this.container.promise().done(function(){E=!0});else{this.container.find(".screen, .p_footer").css({float:"left",width:b}),this.container.find(".content").css({width:b*this.size}),this.container.css({"margin-left":-i*u(window).width(),"margin-top":0});for(var d=0;d<Math.abs(e-i);d++)this.container.animate({"margin-left":f+b},{easing:o[1],duration:r[1],complete:function(){w(a)}}).delay(c[1])}}else if(function(n){for(var t=0,i=n.length;t<i;t++)if(/\*/.test(n[t]))return!0;return!1}(this.type.slice(1)))if(a)this.type.slice().forEach(function(n,t){i<t&&t<=e&&(1==n?(this.container.queue(function(){u(this).find(".screen").css({float:"none"}),u(this).find(".p_footer").css({float:"none",width:"100%"}),u(this).find(".content").css({display:"block",width:"100%"}),u(this).css("margin-left",0),u(this).css("margin-top",-(t+1-1-1)*q),u(this).dequeue()}),this.container.animate({"margin-top":-(t+1-1)*q},{easing:o[t],duration:r[t],complete:function(){E=!0,w(a)}}).delay(c[t])):-1==n?(this.container.queue(function(){u(this).find(".screen").css({float:"left",width:b}),u(this).find(".p_footer").css({float:"left",width:b}),u(this).find(".content").css({display:"block",width:b*s.size}),u(this).css("margin-top",0),u(this).css("margin-left",-(t+1-1-1)*b),u(this).dequeue()}),this.container.animate({"margin-left":-(t+1-1)*b},{easing:o[t],duration:r[t],complete:function(){E=!0,w(a)}}).delay(c[t])):"1*"==n?(this.container.queue(function(){u(this).find(".screen").css({float:"none",width:"100%"}),u(this).find(".p_footer").css({float:"none",width:"100%"}),u(this).find(".screen").each(function(n,t){u(this).css({order:s.size-n})}),u(this).find(".p_footer").css({order:s.size+1}),u(this).find(".content").css({display:"flex","flex-direction":"column",width:"100%"}),u(this).css("margin-left",0),console.log(s.size-(t+1)),u(this).css("margin-top",-(s.size-(t-1+1))*q),u(this).dequeue()}),this.container.animate({"margin-top":-(s.size-(t-1+1+1))*q},{easing:o[t],duration:r[t],complete:function(){E=!0,w(a)}}).delay(c[t])):"-1*"==n&&(this.container.queue(function(){u(this).find(".screen").css({float:"right",width:b}),u(this).find(".p_footer").css({float:"right",width:"100%"}),u(this).find(".content").css({display:"block",width:b*s.size}),u(this).css("margin-top",0),u(this).css("margin-left",-(s.size-(t+1-1))*b),u(this).dequeue()}),this.container.animate({"margin-left":-(s.size-(t+1))*b},{easing:o[t],duration:r[t],complete:function(){E=!0,w(a)}}).delay(c[t])))}.bind(this));else for(d=this.type.length-1;0<=d;d--)(function(n){n<=i&&e<n&&("1*"==this.type[n]?(this.container.queue(function(){u(this).find(".screen").css({float:"none",width:"100%"}),u(this).find(".p_footer").css({float:"none",width:"100%"}),u(this).find(".screen").each(function(n,t){u(this).css({order:s.size-n})}),u(this).find(".p_footer").css({order:s.size+1}),u(this).find(".content").css({display:"flex","flex-direction":"column",width:"100%"}),u(this).css("margin-left",0),console.log(s.size-(n+1)),u(this).css("margin-top",-(s.size-(n-1+1+1))*q),u(this).dequeue()}),this.container.animate({"margin-top":-(s.size-(n-1+1))*q},{easing:o[n],duration:r[n],complete:function(){E=!0,w(a)}}).delay(c[n])):"-1*"==this.type[n]?(this.container.queue(function(){u(this).find(".screen").css({float:"right",width:b}),u(this).find(".p_footer").css({float:"right",width:"100%"}),u(this).find(".content").css({display:"block",width:b*s.size}),u(this).css("margin-top",0),u(this).css("margin-left",-(s.size-(n+1))*b),u(this).dequeue()}),this.container.animate({"margin-left":-(s.size-(n+1-1))*b},{easing:o[n],duration:r[n],complete:function(){E=!0,w(a)}}).delay(c[n])):1==this.type[n]?(this.container.queue(function(){u(this).find(".screen").css({float:"none"}),u(this).find(".p_footer").css({float:"none",width:"100%"}),u(this).find(".content").css({width:"100%"}),u(this).css("margin-left",0),u(this).css("margin-top",-(n+1-1)*q),u(this).dequeue()}),this.container.animate({"margin-top":-(n+1-1-1)*q},{easing:o[n],duration:r[n],complete:function(){E=!0,w(a)}}).delay(c[n])):-1==this.type[n]&&(this.container.queue(function(){u(this).find(".screen").css({float:"left",width:b}),u(this).find(".screen").css({float:"left",width:b}),u(this).find(".content").css({width:b*s.size}),u(this).css("margin-top",0),u(this).css("margin-left",-(n+1-1)*b),u(this).dequeue()}),this.container.animate({"margin-left":-(n+1-1-1)*b},{easing:o[n],duration:r[n],complete:function(){E=!0,w(a)}}).delay(c[n])))}).bind(this)(d);else if(a)this.type.slice().forEach(function(n,t){i<t&&t<=e&&(1==n?(this.container.queue(function(){u(this).find(".screen").css({float:"none"}),u(this).find(".content").css({width:"100%"}),u(this).css("margin-left",0),u(this).css("margin-top",-(t+1-1-1)*q),u(this).dequeue()}),this.container.animate({"margin-top":-(t+1-1)*q},{easing:o[t],duration:r[t],complete:function(){E=!0,w(a),u("body").trigger("DESIGN_TRANK")}}).delay(c[t])):(this.container.queue(function(){u(this).find(".screen").css({float:"left",width:b}),u(this).find(".content").css({width:b*s.size}),u(this).css("margin-top",0),u(this).css("margin-left",-(t+1-1-1)*b),u(this).dequeue()}),this.container.animate({"margin-left":-(t+1-1)*b},{easing:o[t],duration:r[t],complete:function(){E=!0,w(a),u("body").trigger("DESIGN_TRANK")}}).delay(c[t])))}.bind(this));else for(var h=this.type.length-1;0<=h;h--)(function(n){n<=i&&e<n&&(1==this.type[n]?(this.container.queue(function(){u(this).find(".screen").css({float:"none"}),u(this).find(".content").css({width:"100%"}),u(this).css("margin-left",0),u(this).css("margin-top",-(n+1-1)*q),u(this).dequeue()}),this.container.animate({"margin-top":-(n+1-1-1)*q},{easing:o[n],duration:r[n],complete:function(){E=!0,w(a)}}).delay(c[n])):(this.container.queue(function(){u(this).find(".screen").css({float:"left",width:b}),u(this).find(".content").css({width:b*s.size}),u(this).css("margin-top",0),u(this).css("margin-left",-(n+1-1)*b),u(this).dequeue()}),this.container.animate({"margin-left":-(n+1-1-1)*b},{easing:o[n],duration:r[n],complete:function(){E=!0,w(a)}}).delay(c[n])))}).bind(this)(h)},S.prototype.init=function(){var i=0;u(".w_sfbox.container").find(".screen").show(),u(".screen").height(q),u(".w_sfbox.container").parent().height(q).width("100%"),u(".w_sfbox.container").parent().parent().css({overflow:"hidden",width:"100%",position:"fixed"}),u(".w_sfbox.container").find(".p_SwipPanelBox").css("z-index",2e4),u(".w_sfbox.container").find(".p_SwipPanelBox .p_SwipPanel").removeClass("active"),u(".w_sfbox.container").find(".p_SwipPanelBox .p_SwipPanel").eq(0).addClass("active"),u(".w_sfbox.container").find(">div.content").data("items").forEach(function(n,t){n.url,n.color}),a=u(".w_sfbox.container").find(">.content").data("items"),(M=a.map(function(n,t){return n.anchor})).forEach(function(n,t){n==location.hash.substring(1)&&(i=t)}),u(".w_sfbox.container").find(".p_SwipPanelBox .p_SwipPanel").removeClass("active"),u(".w_sfbox.container").find(".p_SwipPanelBox .p_SwipPanel").eq(i).addClass("active");var n=function(){for(var n=location.hash.substring(1),t=0,i=0;i<M.length;i++)if(M[i]==n){t=i;break}return t}()+1,t=a[n-1].flag,e={width:b};_.container.parent().css("left",-u(".pagebox").offset().left),0!=t&&(1==t?(e.float="none",_.container.css("margin-top","-"+(n-1)*q+"px")):-1==t?(e.float="left",_.container.css("margin-left","-"+(n-1)*b+"px")):"1*"==t?(e.float="none",_.container.css("margin-top","-"+(_.size-n)*q+"px")):"-1*"==t&&(e.float="left",_.container.css("margin-left","-"+(_.size-n)*b+"px"))),_.container.find(".p_footer").css({float:"left",width:b}),_.container.find(".screen").css(e),_.container.find(".content").css({width:b*_.size}),_.set(n)},S.prototype.getCurrent=function(){return this.current},S.prototype.set=function(n){this.current=n},S.prototype.setCurrent=function(n){if(!(n<1||n>this.size)){var t=this.current;n>this.size?this.current=this.size:this.current=n<1?1:n,this.trigger("change"),this._play(t,n),this.trigger("after")}};return{init:function(){var n,c=[];if(n=window.isFrontEnv(),v=u(".w_sfbox.container").find(">div").data("hasfooter"),n){u("body").css("overflow","hidden"),b=u(window).width(),q=u(window).height();var a=u(".w_sfbox.container").find(">.content").data("items"),t=0;console.log(a);var i=g(a,"flag");console.log(i),_=new S(i.length,500,i),(window.base=_).container.find("div.p_fbox .tips").hide(),_.on("change",function(){var n=this.getCurrent();E=!1,this.container.find(".p_SwipPanelBox .p_SwipPanel").removeClass("active"),this.container.find(".p_SwipPanelBox .p_SwipPanel").eq(n-1).addClass("active")}),_.on("after",function(){this.container.promise().done(function(){E=!0,C(),O()})}),_.init(),u(window).resize(function(){u(".w_sfbox.container").parent().height(u(window).height()).css("left",-u(".pagebox").offset().left),u(".w_sfbox.container").parent().parent().css({overflow:"hidden",width:"100%",position:"fixed"}),b=u(window).width(),q=u(window).height(),u(".screen").height(q).width(b);var n=_.getCurrent();_.container.stop(!0,!0);var t=a[n-1].flag;0!=t&&(1==t?_.container.css("margin-top","-"+(n-1)*q+"px"):-1==t?_.container.css("margin-left","-"+(n-1)*b+"px"):"1*"==t?_.container.css("margin-top","-"+(_.size-n)*q+"px"):"-1*"==t&&_.container.css("margin-left","-"+(_.size-n)*b+"px"))}),u(window).on("hashchange",function(){var i=_.current,n=a[i-1].flag;if(i=location.hash.substring(1).replace(/[^\d]*(\d+)/,"$1"),0==n||1!=n||_.container.css("margin-top")!="-"+(i-1)*q+"px"){(function(n){for(var t=n.map(function(n,t){return n.flag})||[],i=0;i<t.length;i++)if("-1"!=t[i])return!0;return!1})(a)&&(E=!1);var e=window.location.hash.slice(1);M.forEach(function(n,t){n==e&&(i=t+1)}),0!=n&&(1==n?(0==parseFloat(_.container.css("margin-top"))&&0!=parseFloat(_.container.css("margin-left"))||_.container.animate({"margin-top":"-"+(i-1)*q+"px"},{easing:a[0].animEff,duration:1e3*a[0].duration,complete:function(){E=!0}}),_.current=i):-1==n?_.container.animate({"margin-left":"-"+(i-1)*b+"px"},{easing:a[0].animEff,duration:1e3*a[0].duration,complete:function(){}}):"1*"==n?_.container.css("margin-top","-"+(_.size-i)*q+"px"):"-1*"==n&&_.container.css("margin-left","-"+(_.size-i)*b+"px"))}});var o,e,r=0,s=0;u(window).on("orientationchange",function(n){u(window).trigger("resize")}),u(document).on("touchstart",function(n){e=n.originalEvent.changedTouches[0].pageX,s=n.originalEvent.changedTouches[0].pageY}),u(window).on("touchend",function(n){if(E){var t=n.originalEvent.changedTouches[0].pageX-e,i=n.originalEvent.changedTouches[0].pageY-s;Math.abs(i)>Math.abs(t)&&(0<i?h():i<0&&d())}});var f=(new Date).getTime();function d(){if(--t%1==0)if(S.smallStartTime=0,v&&_.getCurrent()==_.size&&z%2==0)z++,_.container.queue(function(){u(this).find(".screen").css({float:"none"}),u(this).find(".p_footer").css({float:"none",width:"100%"}),u(this).find(".content").css({width:"100%"}),u(this).css("margin-left",0),u(this).css("margin-top",-(_.size-1)*q),u(this).dequeue()}),E=!1,_.container.animate({"margin-top":"-="+_.container.find(">div").data("height")},{easing:_.container.find(">div").data("footeranimEff"),duration:_.container.find(">div").data("footerduration")/1*1e3,complete:function(){}}).delay(_.container.find(">div").data("footerdelay")/1*1e3),_.container.promise().done(function(){E=!0}),_.container.find(".p_footer").hide().css("width"),_.container.find(".p_footer").show();else{if(o=_.current,_.current==_.size)return;p(_.container.find(".screen").eq(_.current-1).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div")),console.log("触发下一屏"+(_.current+1)),u("body").trigger("ND_RefreshCompNew",{screenIndex:_.current+1}),_.container.find(".screen").eq(_.current).hide().css("width"),_.container.find(".screen").eq(_.current).show(),_.setCurrent(_.getCurrent()+1)}}function h(){if(--t%1==0)if(S.bigStartTime=0,v&&_.getCurrent()==_.size&&z%2!=0)z--,E=!1,_.container.animate({"margin-top":"+="+_.container.find(">div").data("height")},{easing:_.container.find(">div").data("footeranimEff"),duration:_.container.find(">div").data("footerduration")/1*1e3,complete:function(){}}).delay(_.container.find(">div").data("footerdelay")/1*1e3),_.container.promise().done(function(){E=!0});else{if(o=_.current-2,1==_.current)return;p(_.container.find(".screen").eq(_.current-1).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div")),console.log("触发下一屏"+(_.current-1)),u("body").trigger("ND_RefreshCompNew",{screenIndex:_.current-1}),_.container.find(".screen").eq(_.current-1-1).hide().css("width"),_.container.find(".screen").eq(_.current-1-1).show(),_.setCurrent(_.getCurrent()-1)}}u(window).on("mousewheel DOMMouseScroll",function(n){var t=(new Date).getTime();if(_.container.is(":animated"))return n.stopPropagation(),n.preventDefault(),!1;if(E){var i=n.originalEvent.wheelDelta||-n.originalEvent.deltaY||-n.originalEvent.detail,e=Math.max(-1,Math.min(1,i)),a=void 0!==n.originalEvent.wheelDeltaX||void 0!==n.originalEvent.deltaX,s=Math.abs(n.originalEvent.wheelDeltaX)<Math.abs(n.originalEvent.wheelDelta)||Math.abs(n.originalEvent.deltaX)<Math.abs(n.originalEvent.deltaY)||!a;149<c.length&&c.shift(),c.push(Math.abs(i));var o=t-f;if(f=t,200<o&&(c=[]),I){var r=D(c,10);D(c,70)<=r&&s&&(I=!1,o<1050?e!=P?0<e?(h(),P=e):e<0&&(d(),P=e):(clearTimeout(x),x=setTimeout(function(){P=5},700)):(e<0?d():h(),P=e),clearTimeout(y),y=setTimeout(function(){I=!0},700))}return!1}}),_.container.find(".p_SwipPanelBox .p_SwipPanel").click(function(){if(E=!1,0==r&&(r=1,setTimeout(function(){r=0},500),u(this).index()!=o&&u(this).index()!=_.current-1)){o=u(this).index(),_.container.find(".p_SwipPanelBox .p_SwipPanel").removeClass("active"),_.container.find(".p_SwipPanelBox .p_SwipPanel").eq(u(this).index()).addClass("active"),_.current-1!=u(this).index()&&p(_.container.find(".screen").eq(_.current-1).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div"));var n=u(this).index(),t=u(".w_sfbox.container").find(">.content").data("items"),i=t.map(function(n,t){return n.animEff}),e=t.map(function(n,t){return 1e3*n.duration});if(g(t,"delay").map(function(n,t){return 1e3*n}),setTimeout(function(){_.container.find(".screen").eq(n).hide().css("width"),_.container.find(".screen").eq(n).show()},(Math.abs(u(this).index()-(_.current-1))-1)/Math.abs(u(this).index()-(_.current-1))*e[n]),1==t[n].flag)_.container.queue(function(){u(this).find(".screen").css({float:"none"}),u(this).find(".p_footer").css({float:"none",width:"100%"}),u(this).find(".content").css({width:"100%"}),u(this).css("margin-left",0),u(this).css("margin-top",_.container.css("margin-top")),u(this).dequeue()}),_.container.stop().animate({"margin-top":-n*q},e[n],i[n],function(){E=!0,l(_.container.find(".screen").eq(_.current-1).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div")),_.set(n+1)});else if(-1==t[n].flag)_.container.queue(function(){u(this).find(".screen, .p_footer").css({float:"left",width:b}),u(this).find(".screen").css({float:"left",width:b}),u(this).find(".content").css({width:b*_.size}),u(this).css("margin-top",0),u(this).css("margin-left",_.container.css("margin-left")),u(this).dequeue()}),_.container.stop().animate({"margin-left":-n*b},e[n],i[n],function(){_.set(n+1),E=!0,l(_.container.find(".screen").eq(n).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div"))});else if("1*"==t[n].flag){var a;a=1==_.current?-(_.size-0-1)*q:_.container.css("margin-top"),_.container.queue(function(){u(this).find(".screen").css({float:"none",width:"100%"}),u(this).find(".p_footer").css({float:"none",width:"100%"}),u(this).find(".screen").each(function(n,t){u(this).css({order:_.size-n})}),u(this).find(".p_footer").css({order:_.size+1}),u(this).find(".content").css({display:"flex","flex-direction":"column",width:"100%"}),u(this).css("margin-left",0),u(this).css("margin-top",a),u(this).dequeue()}),_.container.stop().animate({"margin-top":-(_.size-n-1)*q},e[n],i[n],function(){_.set(n+1),E=!0,l(_.container.find(".screen").eq(n).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div"))})}else if("-1*"==t[n].flag){var s;1==_.current&&(s=_.container.is(":animated")?_.container.css("margin-left"):-(_.size-0-1)*b),_.container.queue(function(){u(this).find(".screen").css({float:"right",width:b}),u(this).find(".p_footer").css({float:"right",width:"100%"}),u(this).find(".content").css({display:"block",width:b*_.size}),u(this).css("margin-top",0),u(this).css("margin-left",s),u(this).dequeue()}),_.container.stop().animate({"margin-left":-(_.size-n-1)*b},e[n],i[n],function(){_.set(n+1),E=!0,l(_.container.find(".screen").eq(n).find("div[id^='c_'] > div:first-of-type,div[id^='w_'] > div"))})}console.log("触发下一屏"+(u(this).index()+1)),u("body").trigger("ND_RefreshCompNew",{screenIndex:u(this).index()+1}),_.container.promise().done(function(){C(),O()})}})}else u(".w_sfbox.container").parent().height(q).width("100%"),u(".w_sfbox.container").parent().parent().css({overflow:"hidden",width:"100%",position:"fixed"}),u(".w_sfbox").each(function(){var t=u(this);function n(){var n=t.find(".screen");t.find(">div.p_fbox .tips").css({"z-index":1e4,"font-style":"normal"}),t.find(">div.p_fbox .tips").each(function(n,t){u(this).css("top",0*u(parent.window).height()+u(parent.window).height()/2)}),t.find(">div.p_fbox .tips").hide(),n.each(function(n){u(this).height(u(parent.window).height()-41)}),t.parent().height(u(parent.window).height()-41),n.each(function(n,t){u(this).hasClass("current")||u(this).hide()}),v&&t.find(">div").data("current")/1==t.find(">div").data("items").length&&(n.hide(),n.eq(t.find(">div").data("current")/1-1).show().height(u(parent.window).height()-41-t.find(">div").data("height")/1),t.find(".p_SwipPanelBox .p_SwipPanel").eq(t.find(">div").data("current")/1-1).addClass("active"))}u(window).on("resize",function(){n()}),n()}),top.M.Panel.Components.getFPDfd().done(function(){u(".w_sfbox.container .tips").hide()})}}});