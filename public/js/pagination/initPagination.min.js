$define(["js/pagination/pagination"],function(p,c){return window.pagingIds={},init=function(){var n=this._params,e=this._params.params,t=this._params.id,r="c_"+t,g=e.callback,s=c.init();s.divid=t,s.params=n,s.initUri(e.url),s.initPagination(e.pageSize,e.currentPage,e.totalPages);var a=p("#"+r);a.undelegate(".next","click").delegate(".next","click",function(){return s.currentPage==s.totalPages||s.next(s.currentPage,s.totalPages,s.pageSize,t,g,n),!1}),a.undelegate(".pre","click").delegate(".pre","click",function(){return 1==s.currentPage||s.pre(s.currentPage,s.totalPages,s.pageSize,t,g,n),!1}),a.undelegate(".pageNum","click").delegate(".pageNum","click",function(){var e=this.innerHTML;if(s.currentPage!=parseInt(e))return s.jump(e,s.pageSize,t,g,n),!1}),a.undelegate(".pagesize","change").delegate(".pagesize","change",function(){this.innerHTML;var e=p("option:selected",this).val();return s.jump(p(".pageNum.active",a).html(),e,t,g,n),s.pageSize=e,!1});var i=function(){if(!s.isPopstateChange){var e,a=location.hash.split("#")?location.hash.split("#").slice(1):"";if(0<a.length){for(var i=0;i<a.length;i++)-1!=a[i].indexOf(r+"-")&&(e=a[i].replace(r+"-",""));e||(e=1)}else e=1;if(s.currentPage==parseInt(e))return;s.isHashChange=!0,s.jump(e,s.pageSize,t,g,n),s.isHashChange=!1}};return window.pagingIds[r]&&window.removeEventListener("popstate",window.pagingIds[r]),window.addEventListener("popstate",i),(window.pagingIds[r]=i)(),s},{init:init}});