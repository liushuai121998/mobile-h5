$define(["wgt_readyload","adFocus","jquery.marquee"],function(I,k,e){var D=function(e){for(var t=e.className.split(" "),a=0;a<t.length;a++)if("p_"==t[a].substring(0,2))return t[a]},j=function(r,o){var i=o.param,l=o.comp,c="click",a=null==o.type?2:o.type,n=o.styleConfig,t=o.loading,s=o.value,u=o.page;l.find("."+n.zstyle).parent().remove();var g=function(){if(p())r.off(c),r.remove();else if(!p()||1!=u.currentPage){1==a&&(n.zstyle="item_hide");var e=I.extend({},n,!0),t=I(I._UTL.createBtn(e,s));o.moreGuide&&t.attr("title",o.moreGuide),r.html(t)}},m=function(){var e=I._UTL.createLoading(t.styleConfig,t.value);r.html(e)},d=function(){if(r.off(c).on(c,function(e){var t,a,n={currentPage:++u.currentPage,pageSize:u.pageSize,totalPage:u.totalPage,contentReq:!0};if(n=I.extend(n,o.data||{}),i.keymapping&&(t=n,a=i.keymapping,I.each(a,function(e){t[a[e]]=t[e]})),e.preventDefault(),e.stopPropagation(),null!=u.url&&null==u.getContent)r.off(c),m(),I.ajax({url:u.url,data:n,async:!1,dataType:"html",success:function(e){var t=D(l.get(0)),a=I("<div>").html(e),n=a.find("."+t).children();n=n.add(a.find("script")),l.append(n),r.closest(l).length,g(),o.successFun&&o.successFun(n);var s=l.getScope();k.lazyImg({defObj:"#"+s.attr("id")}),k.setCompPostion(l.closest("div[id^='c_']")),p()||d()},failure:function(){r.remove(),o.failureFun&&o.failureFun()}});else{m();var s=u.getContent(n);l.append(s),r.closest(l).length&&l.children().last().after(r),u.afterPage&&u.afterPage(o.comp,s),o.successFun&&o.successFun(s),g(),k.setCompPostion(l.closest("div[id^='c_']"));var _=l.getScope();k.lazyImg({defObj:"#"+_.attr("id")}),p()||d()}}),1==a){function e(){return I(document).height()>I(window).height()}null!=u.url&&u.getContent,e()||r.trigger(c);var t=function(){(function(){document;var e=I(window).scrollTop();return e>=I(document).height()-(I(window).height()+.2*e)})()&&!p()&&r.trigger(c)};I(document).off("scroll",t).on("scroll",t)}},p=function(){return u.currentPage==u.totalPage};g(),p()||d(),o.firstRefresh&&r.trigger(c);return this},L=function(e,t){var a=e.clone();e.empty();var n=e.clone(),s=e.parent();e.remove(),!isFrontEnv()&&t.url&&(t.navs[0]=a.children());var _={data:{navs:t.navs},url:t.url,successFun:t.successFun,THL_cloneCell:n,c_scope:t.scope,marqueeLoad:{data:t.data},comp_type:"THL",box_img_style_0:null,box_img_style_1:null,box_img_style_2:null,box_arrow_l_style_0:"e_box",box_arrow_l_style_1:"e_box-000",box_arrow_l_style_2:"p_CommonInteraction",box_arrow_r_style_0:"e_box",box_arrow_r_style_1:"e_box-000",box_arrow_r_style_2:"p_CommonInteraction",box_txt_style_0:"e_box",box_txt_style_1:"e_box-000",box_txt_style_2:"p_CommonSummaryBoxA",box_txt_title_style_0:"e_box",box_txt_title_style_1:"e_box-000",box_txt_title_style_2:"p_TitleBox",box_nav_style_0:"e_box",box_nav_style_1:"e_box-000",box_nav_style_2:"p_CommonThumbnailBox",e_img_style_2:"p_news",e_arrow_l_style_0:"e_SwitchBtn",e_arrow_l_style_1:t.es_CommonSwitchBtnA,e_arrow_l_style_2:"p_CommonSwitchBtnA",e_arrow_r_style_0:"e_SwitchBtn",e_arrow_r_style_1:t.es_CommonSwitchBtnB,e_arrow_r_style_2:"p_CommonSwitchBtnB",e_nav_arrow_l_style_0:"e_switchbtn",e_nav_arrow_l_style_1:"e_IconSwitchBtn-002",e_nav_arrow_l_style_2:"p_SwitchBtnC",e_nav_arrow_r_style_0:"e_switchbtn",e_nav_arrow_r_style_1:"e_IconSwitchBtn-002",e_nav_arrow_r_style_2:"p_SwitchBtnD",e_nav_img_style_0:"e_numbtn",e_nav_img_style_1:t.es_CommonSquareNumBtn,e_nav_img_style_2:"p_CommonSquareNumBtn",e_a_img_style_0:"e_link",e_a_img_style_1:"e_Link-000",e_a_img_style_2:"p_news",e_a_txt_style_0:"e_link",e_a_txt_style_1:"e_Link-000",e_a_txt_style_2:"p_LinkB",img_arrows:t.CommonInteraction,img_autoPlay:t.marquee_autoPlay,img_autoPlayDuration:t.marquee_autoPlayDuration,img_transition:"fade",img_speed:1e3,img_easing:"easeOutQuart",nav_display_status:t.CommonSummaryBoxA,nav_type:"c",nav_scale_x:4,nav_scale_y:3,nav_s_size_w:t.SquareNumBtn_defWidth,nav_s_size_h:t.SquareNumBtn_defHeight,nav_display_num:5,nav_position:t.marquee_horizontal,nav_display_padding:10,nav_keyboardOnAlways:!0,nav_step:1,nav_hover:!0,marqueePosition:t.marquee_position,txt_display_status:!0,txt_title:!1,txt_describe:!1,txt_height:110,txt_bottom_position:14,nav_type_s:"lm",logs:!1};s.adFocus(_)};I.fn.paging=function(s){var _=I(this);if(this.length){var e="",r=_.closest("div[id^='c_']"),o=r.attr("id"),t=_.closest(".stylebox_content"),a=t.length&&t||r,n=r.find(".p_OccupyBox"),i=!!_.attr("isServerPaging");if(_.attr("isServerPaging",!0),window.pagingVM&&pagingVM[o.substring(2)]&&(s=I.extend(pagingVM[o.substring(2)]||{},s)),s.totalPage=parseInt(s.totalPage)||void 0,s.pageSize=parseInt(s.pageSize)||void 0,s.currentPage=parseInt(s.currentPage)||void 0,s.more=parseInt(s.more)||void 0,s.SquareNumBtn_defWidth=parseInt(s.SquareNumBtn_defWidth)||void 0,s.SquareNumBtn_defHeight=parseInt(s.SquareNumBtn_defHeight)||void 0,s.marquee_autoPlayDuration=parseInt(s.marquee_autoPlayDuration)||void 0,s.type="true"==s.type||1==s.type||2==s.type,s.CommonInteraction="true"==s.CommonInteraction||1==s.CommonInteraction,s.CommonSummaryBoxA="true"==s.CommonSummaryBoxA||1==s.CommonSummaryBoxA,s.marquee_autoPlay="true"==s.marquee_autoPlay||1==s.marquee_autoPlay,"rollingLoad"==s.turnPageType){if(i)return;s.styleConfig.zstyle="p_more";j(n,{type:!0===s.type||2===s.type||null==s.type?2:1,value:s.value,styleConfig:s.styleConfig,successFun:s.successFun,failureFun:s.failureFun,moreGuide:s.moreGuide,data:s.data,firstRefresh:s.firstRefresh||!1,page:{totalPage:s.totalPage,currentPage:1,pageSize:s.pageSize,getContent:s.getContent,url:s.url},comp:_,loading:s.loading,param:s});s.successFun&&s.successFun(_.children())}else if("marqueeScroll"==s.turnPageType){if(i)return;if(0==s.totalPage)return;var l=_.parent();if(s.url){if(1==s.totalPage)return _.attr("paging-num","1"),void(s.successFun&&s.successFun(l));c=[],s.navs=new Array(s.totalPage),s.navs[0]=_.clone().children(),function(e){var t=_$the.clone();_$the.empty();var a=_$the.clone(),n=_the.parent();_$the.remove(),!isFrontEnv()&&e.url&&(e.navs[0]=t.children());var s={data:{navs:e.navs},compId:id,url:e.url,successFun:e.successFun,marqueeLoad:{data:e.data},THL_cloneCell:a,comp_type:"marS",box_img_style_0:null,box_img_style_1:null,box_img_style_2:null,box_arrow_l_style_0:"e_box",box_arrow_l_style_1:"e_box-000",box_arrow_l_style_2:"p_CommonInteraction",box_arrow_r_style_0:"e_box",box_arrow_r_style_1:"e_box-000",box_arrow_r_style_2:"p_CommonInteraction",box_txt_style_0:"e_box",box_txt_style_1:"e_box-000",box_txt_style_2:"p_CommonSummaryBoxA",box_txt_title_style_0:"e_box",box_txt_title_style_1:"e_box-000",box_txt_title_style_2:"p_TitleBox",box_nav_style_0:"e_box",box_nav_style_1:"e_box-000",box_nav_style_2:"p_CommonThumbnailBox",e_img_style_2:"p_news",e_arrow_l_style_0:"e_SwitchBtn",e_arrow_l_style_1:e.es_CommonSwitchBtnA,e_arrow_l_style_2:"p_CommonSwitchBtnA",e_arrow_r_style_0:"e_SwitchBtn",e_arrow_r_style_1:e.es_CommonSwitchBtnB,e_arrow_r_style_2:"p_CommonSwitchBtnB",e_nav_arrow_l_style_0:"e_switchbtn",e_nav_arrow_l_style_1:"e_IconSwitchBtn-002",e_nav_arrow_l_style_2:"p_SwitchBtnC",e_nav_arrow_r_style_0:"e_switchbtn",e_nav_arrow_r_style_1:"e_IconSwitchBtn-002",e_nav_arrow_r_style_2:"p_SwitchBtnD",e_nav_img_style_0:"e_numbtn",e_nav_img_style_1:e.es_CommonSquareNumBtn,e_nav_img_style_2:"p_CommonSquareNumBtn",e_a_img_style_0:"e_link",e_a_img_style_1:"e_Link-000",e_a_img_style_2:"p_LinkA",e_a_txt_style_0:"e_link",e_a_txt_style_1:"e_Link-000",e_a_txt_style_2:"p_LinkB",img_arrows:e.CommonInteraction,img_autoPlay:e.marquee_autoPlay,img_autoPlayDuration:e.marquee_speed,img_transition:"fade",img_speed:1e3,img_easing:"easeOutQuart",nav_display_status:e.CommonSummaryBoxA,nav_type:"c",nav_scale_x:4,nav_scale_y:3,nav_s_size_w:e.SquareNumBtn_defWidth,nav_s_size_h:e.SquareNumBtn_defHeight,nav_display_num:5,nav_position:e.marquee_horizontal,nav_display_padding:10,nav_keyboardOnAlways:!0,nav_step:1,nav_hover:!0,marqueePosition:e.marquee_position,txt_display_status:!0,txt_title:!1,txt_describe:!1,txt_height:110,txt_bottom_position:14,nav_type_s:"lm",logs:!1};e=I.extend(s,e),n.mobileAdMarqueen(e)}(s),s.successFun&&s.successFun(l)}else{if(_.children().length<=s.pageSize)return void(s.successFun&&s.successFun(l));for(var c=[],u=Math.ceil(_.children().length/s.pageSize),g=_.children(),m=0,d=0;d<u;d++)c[d]=g.slice(m,m+s.pageSize),m+=s.pageSize;s.navs=c,L(s),s.successFun&&s.successFun(l)}}else if("marqueeLoad"==s.turnPageType){if(i)return;if(0==s.totalPage)return;l=_.parent();if(s.url){if(1==s.totalPage)return void(s.successFun&&s.successFun(l));c=[],s.navs=new Array(s.totalPage),s.navs[0]=_.clone().children(),L(_,s),s.successFun&&s.successFun(l)}else{if(_.children().length<=s.pageSize)return void(s.successFun&&s.successFun(l));for(c=[],u=Math.ceil(_.children().length/s.pageSize),g=_.children(),m=0,d=0;d<u;d++)c[d]=g.slice(m,m+s.pageSize),m+=s.pageSize;s.navs=c,L(_,s),s.successFun&&s.successFun(l)}}else{if(i)return;if(0==s.totalPage)return;for(d=1;d<parseInt(s.totalPage||0)+1;d++)e+="<li currentPage="+d,1==d&&(e+=' class="click"'),e+='><i class="iconfont ItemFirst"></i><span>'+d+'</span><i class="iconfont ItemLast"></i></li>';if(s.keymapping)var p={page:parseInt(s.currentPage)||1,currentPage:parseInt(s.currentPage)||1,pageSize:s.pageSize,totalPage:s.totalPage};else p={currentPage:parseInt(s.currentPage)||1,totalPage:s.totalPage};s.style=s.style||s.styleConfig.style,s.zstyle="p_pagebox";var y=1==p.currentPage?"pre js_pageBtnDisable":"pre",f=p.currentPage==p.totalPage?"next js_pageBtnDisable":"next",v=I('<div class="e_pagebox '+s.style+" "+s.zstyle+'"><div class="'+y+'"><div class="font"><i class="iconfont"></i>'+(s.pre||"上一页")+'</div></div><div class="NumBox"><div class="num">'+p.currentPage+"/"+s.totalPage+'<i class="iconfont"></i></div><div class="ItemBox item_hide"><ul>'+e+'</ul></div></div><div class="'+f+'"><div class="font"><i class="iconfont"></i>'+(s.next||"下一页")+"</div></div></div>");if("hidden"!=s.turnPageType)if(n.length)n.append(v);else{var h=r.find("."+s.zstyle);h.length&&h.remove(),a.append(v)}var x={};I.extend(x,s.data||{},p);var P,b,w=!1,B=function(){if(s.url)s.keymapping&&(x.page=parseInt(x.currentPage)||1),I.ajax({url:s.url,data:x,async:!1,dataType:"html",success:function(e){var t=D(_.get(0)),a=I("<div>").html(e),n=a.find("."+t).children();n=n.add(a.find("script")),_.html(n),w||I(window).scrollTop(r.offset().top),1==x.currentPage&&r.find("."+s.zstyle+" .pre").addClass("js_pageBtnDisable"),1<x.currentPage&&r.find("."+s.zstyle+" .pre").hasClass("js_pageBtnDisable")&&r.find("."+s.zstyle+" .pre").removeClass("js_pageBtnDisable"),v.find(".num").html(x.currentPage+"/"+s.totalPage+'<i class="iconfont"></i>'),x.currentPage<s.totalPage&&r.find("."+s.zstyle+" .next").hasClass("js_pageBtnDisable")&&r.find("."+s.zstyle+" .next").removeClass("js_pageBtnDisable"),x.currentPage==s.totalPage&&r.find("."+s.zstyle+" .next").addClass("js_pageBtnDisable"),s.successFun&&s.successFun(n),k.setCompPostion(r),w=!1},failure:function(e){var t=I(e);_.empty(),_.html(t||""),v.find(".num").html(x.currentPage+"/"+s.totalPage+'<i class="iconfont"></i>'),s.failureFun&&s.failureFun(t),k.setCompPostion(r),w=!1}});else{var e=s.getContent(x),t=I(e);_.empty(),_.html(t),v.find(".num").html(x.currentPage+"/"+s.totalPage+'<i class="iconfont"></i>'),s.successFun(),k.setCompPostion(r)}};console.log("hashchange",window.onhashchange),window.onhashchange||(window.onhashchange=function(e){var t,a=o,n=e.oldURL.split("#").slice(1),s=e.newURL.split("#").slice(1),_="",r="";for(t=0;t<n.length;t++)if(-1!=n[t].indexOf(a)){r=n[t];break}for(t=0;t<s.length;t++)if(-1!=s[t].indexOf(a)){_=s[t];break}if(r!=_&&!b){if(""!=_){if(-1==_.indexOf(a))return;x.currentPage=parseInt(_.replace(a+"-","")),x.currentPage||(x.currentPage=1)}else x.currentPage=1;P=!0,B(),P=!1}});var C=function(e,t){if(!P){b=!0;var a=location.hash.split("#").slice(1);if(-1==location.hash.indexOf("#"+t))location.hash=location.hash+"#"+t+"-"+e;else{for(var n=0;n<a.length;n++)-1!=a[n].indexOf(t)&&(a[n]=t+"-"+e);location.hash=a.join("#")}S(e,v),b=!1}},S=function(e,t){t.find(".click").removeClass("click"),t.find("li").eq(e-1).addClass("click")};v.find("li").click(function(){I(this).hasClass("click")||(x.currentPage=parseInt(I(this).attr("currentPage")),C(x.currentPage,o))});var F=v.find(".pre"),q=v.find(".next");F.click(function(){1!=x.currentPage?(q.hasClass("js_pageBtnDisable")&&q.removeClass("js_pageBtnDisable"),x.currentPage=x.currentPage-1,C(x.currentPage,o),1==x.currentPage&&I(this).addClass("js_pageBtnDisable")):I(this).addClass("js_pageBtnDisable")}),q.click(function(){x.currentPage!=s.totalPage&&(F.hasClass("js_pageBtnDisable")&&F.removeClass("js_pageBtnDisable"),x.currentPage=x.currentPage+1,C(x.currentPage,o),x.currentPage==s.totalPage&&I(this).addClass("js_pageBtnDisable"))});var z=v.find(".NumBox");z.click(function(){I(".ItemBox",v).toggleClass("item_hide")}),I.documentClick(function(e){var t=I(e.target);t.closest(z).length||t.hasClass("NumBox")||I(".ItemBox",v).addClass("item_hide")}),_.get(0)!=r.get(0)&&!1!==s.firstRefresh&&(w=!0,B()),s.firstRefresh&&(w=!0,B());s.noRefresh||function(e){for(var t=location.hash.split("#").slice(1),a=0;a<t.length;a++)if(-1!=t[a].indexOf(e)){x.currentPage=parseInt(t[a].replace(e+"-",""));break}1!=x.currentPage&&(B(),S(x.currentPage,v))}(o),s.successFun&&s.successFun(_.children())}}}});