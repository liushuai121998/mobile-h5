$define([],function($){var init=function(){var Pagination={uri:"",pageSize:10,currentPage:1,totalPages:0,initUri:function(n){this.uri=n},initPagination:function(n,a,e){null!=a&&a==e&&1==a?(console.log("totalpages:"+e+";currentpage:"+a),$(".p_page").hide()):$(".p_page").show(),null!=a&&a!=e&&1==a?$(".p_page").children(".pre").addClass("pre1"):$(".p_page").children(".pre").removeClass("pre1"),this.pageSize=null==n||"undefined"==n?10:n,this.currentPage=null==a||"undefined"==a?1:a,this.totalPages=null==e||"undefined"==e?0:e,null!=a&&1!=a&&a==e?$(".p_page").children(".next").addClass("next1"):$(".p_page").children(".next").removeClass("next1")},next:function(n,a,e,i,t,r){this.filter({moudleReg:"companyplace/",callBacK:function(n,a){a.uri=n}},this,r);var o=this.uri,s=parseInt(n)+1;a<s&&(s=a),o=compositeUrl(o,e,s,r),this.hashChange(s,i),"function"==typeof t||"string"==typeof t?(invokeCallback(t,o,r),Pagination.currentPage=s,$(window).scrollTop($("#c_"+i).offset().top)):(asyncSubmit(o,"POST",i,r),Pagination.currentPage=s)},pre:function(n,a,e,i,t,r){this.filter({moudleReg:"companyplace/",callBacK:function(n,a){a.uri=n}},this,r);var o=this.uri,s=n-1;s<=0&&(s=1),o=compositeUrl(o,e,s,r),this.hashChange(s,i),"function"==typeof t||"string"==typeof t?(invokeCallback(t,o,r),Pagination.currentPage=s,$(window).scrollTop($("#c_"+i).offset().top)):(asyncSubmit(o,"POST",i,r),Pagination.currentPage=s)},jump:function(n,a,e,i,t){this.filter({moudleReg:"companyplace/",callBacK:function(n,a){a.uri=n}},this,t);var r=compositeUrl(this.uri,a,n,t);this.hashChange(parseInt(n),e),"function"==typeof i||"string"==typeof i?(invokeCallback(i,r,t),Pagination.currentPage=parseInt(n),$(window).scrollTop($("#c_"+e).offset().top)):(asyncSubmit(r,"POST",e,t),Pagination.currentPage=parseInt(n))},ajax:function(){var n=compositeUrl(this.uri,this.pageSize,this.currentPage,this.params);asyncSubmit(n,"POST",this.divid,this.params)},filter:function(n,a,e){e.params&&e.params.url&&-1!=e.params.url.indexOf(n.moudleReg)&&n.callBacK(e.params.url,a)},hashChange:function(n,a){if(!Pagination.isHashChange){Pagination.isPopstateChange=!0;var e=location.hash.split("#");if(-1==location.hash.indexOf("#c_"+a))location.hash=location.hash+"#c_"+a+"-"+n;else{for(var i=0;i<e.length;i++)-1!=e[i].indexOf("c_"+a)&&(e[i]="c_"+a+"-"+n);location.hash=e.join("#")}Pagination.isPopstateChange=!1}}};invokeCallback=function(n,a,e){invokeInner(n,a,e)},invokeInner=function(callback,url,params){var isFun=!0;if("function"==typeof callback?isFun=!0:"string"==typeof callback&&(isFun=!1),isFun)callback(url,params);else{var strobj=JSON.stringify(params);eval(callback+"('"+url+"',("+strobj+"))")}},compositeUrl=function(n,a,e,i){return i.keymapping?n.indexOf("?")<=0?n+"?"+i.keymapping.pageSize+"="+a+"&"+i.keymapping.currentPage+"="+e:n+"&"+i.keymapping.pageSize+"="+a+"&"+i.keymapping.currentPage+"="+e:n.indexOf("?")<=0?n+"?pageSize="+a+"&currentPage="+e:n+"&pageSize="+a+"&currentPage="+e};var getPClass=function(n){for(var a=n.className.split(" "),e=0;e<a.length;e++)if("p_"==a[e].substring(0,2))return a[e]};return refreshDom=function(n,a,e){var i,t="c_"+a;if(e.contentObj){var r=getPClass(e.contentObj.get(0)),o=$("<div>").html(n);i=o.find("."+r).children(),e.noJs||(i=i.add(o.find("script"))),e.contentObj.html(i)}else $("#"+t).html(),$("#"+t).html(n);return $(window).scrollTop($("#"+t).offset().top),i},asyncSubmit=function(n,a,e,i){$.ajax({url:n,type:a,data:i.data,beforeSend:function(n){},error:function(n,a,e){},success:function(n){var a=refreshDom(n,e,i);i.successFun&&i.successFun(a)}})},Pagination};return{init:init}});